{% extends "base.html" %}
{% block content %}

<h2>Election Results</h2>

{% for data in results_data %}
    <div style="margin-bottom: 40px;">
        <h3>{{ data.election.title }}</h3>
        <p><strong>Total Votes:</strong> {{ data.total_votes }}</p>

        <table border="1" cellpadding="10" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>Candidate</th>
                    <th>Party</th>
                    <th>Votes</th>
                    <th>Percentage</th>
                </tr>
            </thead>
            <tbody>
                {% for r in data.results %}
                <tr>
                    <td>{{ r.candidate_name }}</td>
                    <td>{{ r.party_name }}</td>
                    <td>{{ r.votes }}</td>
                    <td>{{ r.percentage }}%</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4">No votes cast yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% empty %}
    <p>No election results available.</p>
{% endfor %}

{% endblock %}
